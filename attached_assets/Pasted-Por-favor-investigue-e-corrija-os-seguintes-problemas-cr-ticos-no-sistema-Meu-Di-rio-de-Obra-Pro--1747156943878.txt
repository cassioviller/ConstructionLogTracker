Por favor, investigue e corrija os seguintes problemas críticos no sistema 'Meu Diário de Obra Pro':
1. Falha de Login e Perda de Dados Após Atualizações de Código:
Problema: Após cada atualização de código que você realiza, o login do usuário para de funcionar (erro "401: {"message":"Nome de usuário ou senha inválidos"}" ao tentar logar com credenciais anteriormente válidas) e, aparentemente, os dados como projetos e RDOs criados anteriormente são perdidos ou se tornam inacessíveis. Isso me força a criar uma nova conta, novos projetos e novos RDOs a cada atualização, impedindo o progresso e testes consistentes.
Solicitação Urgente: Priorize a correção deste problema. Investigue a fundo o sistema de autenticação, gerenciamento de sessão (tokens, cookies, etc.) e a persistência dos dados do usuário (contas, projetos, RDOs) no banco de dados PostgreSQL. Garanta que as sessões de usuário sejam mantidas de forma estável entre as atualizações de código ou, no mínimo, que o login com as credenciais existentes funcione perfeitamente e que todos os dados associados à conta do usuário (projetos, RDOs, etc.) permaneçam intactos e acessíveis após qualquer atualização que você aplicar ao código.
2. RDOs Não Aparecem no Histórico de Relatórios do Projeto:
Problema: Os Relatórios Diários de Obra (RDOs) que são criados não estão sendo exibidos corretamente na seção "Histórico de Relatórios" dentro da página de um projeto específico. Eles podem até estar sendo salvos em algum lugar (talvez na listagem geral de "Todos os Relatórios Diários de Obra"), mas não estão vinculados e visíveis no contexto do projeto ao qual pertencem.
Solicitação:
Verifique a Associação: Revise a lógica de criação e salvamento dos RDOs para garantir que cada RDO seja inequivocamente associado ao ID do projeto correto no banco de dados (PostgreSQL).
Corrija a Listagem por Projeto: Investigue e corrija a rota e a consulta ao banco de dados responsáveis por buscar e exibir os RDOs na página de "Histórico de Relatórios" de um projeto. Ela deve listar apenas os RDOs pertencentes àquele projeto específico.
Analise a Rota Geral de RDOs: Peço que você também verifique como a rota/página "Todos os Relatórios Diários de Obra" está funcionando. Como ela busca e exibe os relatórios? Existe algum conflito ou lógica incorreta que possa estar afetando a exibição dos RDOs dentro dos projetos? O ideal é que os RDOs apareçam corretamente tanto nesta visualização geral (se aplicável) quanto, e mais importante, no histórico específico de cada projeto.